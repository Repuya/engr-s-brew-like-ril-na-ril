<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engr's Brew POS</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8B4513;
            --primary-dark: #654321;
            --primary-light: #a56b3a;
            --secondary: #f8f9fa;
            --accent: #d4a574;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --dark: #343a40;
        }
        
        * {
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            overflow-x: hidden;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }
        
        /* Header Styles */
        .brand-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .brand-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
            opacity: 0.1;
        }
        
        .brand-logo {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
        }
        
        .brand-logo i {
            margin-right: 10px;
            font-size: 2rem;
        }
        
        .cashier-name {
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 5px 10px;
            border-radius: 5px;
        }
        
        .cashier-name:hover {
            background: rgba(255,255,255,0.2);
        }
        
        /* Menu Categories */
        .category-nav {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .category-btn {
            border: none;
            border-radius: 8px;
            padding: 10px 15px;
            margin: 5px;
            font-weight: 500;
            transition: all 0.3s ease;
            background: var(--secondary);
            color: var(--dark);
        }
        
        .category-btn:hover, .category-btn.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(139, 69, 19, 0.3);
        }
        
        /* Menu Items */
        .menu-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            padding: 20px;
            height: calc(100vh - 200px);
            overflow-y: auto;
        }
        
        .menu-item {
            border: none;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
            margin-bottom: 20px;
            background: white;
            cursor: pointer;
        }
        
        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.12);
        }
        
        .item-image-container {
            position: relative;
            height: 150px;
            overflow: hidden;
        }
        
        .item-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .menu-item:hover .item-image {
            transform: scale(1.05);
        }
        
        .item-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(transparent, rgba(0,0,0,0.7));
            padding: 10px;
            color: white;
        }
        
        .item-name {
            font-weight: 600;
            margin: 0;
            font-size: 1rem;
        }
        
        .item-price {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        /* Order Section */
        .order-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            padding: 20px;
            height: calc(100vh - 200px);
            display: flex;
            flex-direction: column;
        }
        
        .order-header {
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 15px;
            margin-bottom: 15px;
        }
        
        .order-list {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 15px;
        }
        
        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            background: var(--secondary);
            transition: all 0.3s ease;
        }
        
        .order-item:hover {
            background: #e9ecef;
        }
        
        .order-item-details {
            flex: 1;
        }
        
        .order-item-name {
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .order-item-extras {
            font-size: 0.85rem;
            color: #6c757d;
        }
        
        .order-item-controls {
            display: flex;
            align-items: center;
        }
        
        .quantity-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .quantity-value {
            margin: 0 10px;
            font-weight: 500;
            min-width: 20px;
            text-align: center;
        }
        
        .order-item-price {
            font-weight: 600;
            color: var(--primary);
            min-width: 80px;
            text-align: right;
        }
        
        .order-summary {
            border-top: 2px dashed #dee2e6;
            padding-top: 15px;
        }
        
        .payment-section {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .payment-btn {
            border: none;
            border-radius: 8px;
            padding: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .payment-btn i {
            margin-right: 8px;
        }
        
        .btn-card {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
        }
        
        .btn-maya {
            background: linear-gradient(135deg, #6f42c1, #5a2d9c);
            color: white;
        }
        
        .btn-cash {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
        }
        
        .btn-void {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
        }
        
        .btn-print {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
        }
        
        .btn-exit {
            background: linear-gradient(135deg, #6c757d, #545b62);
            color: white;
        }
        
        .payment-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        /* Modal Enhancements */
        .modal-content {
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border-bottom: none;
            padding: 15px 20px;
        }
        
        .modal-title {
            font-weight: 600;
        }
        
        .btn-close {
            filter: invert(1);
        }
        
        .size-option {
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .size-option:hover, .size-option.selected {
            border-color: var(--primary);
            background: rgba(139, 69, 19, 0.1);
        }
        
        .size-option.selected {
            background: var(--primary);
            color: white;
        }
        
        .add-on-item {
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }
        
        .add-on-item:hover, .add-on-item.selected {
            border-color: var(--primary);
            background: rgba(139, 69, 19, 0.1);
        }
        
        .add-on-item.selected {
            background: var(--primary);
            color: white;
        }
        
        .add-on-price {
            font-size: 0.8rem;
            color: #6c757d;
        }
        
        .add-on-item.selected .add-on-price {
            color: rgba(255,255,255,0.8);
        }
        
        /* Receipt Styling */
        .receipt {
            font-family: 'Courier New', monospace;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .receipt-header {
            text-align: center;
            border-bottom: 2px dashed #333;
            padding-bottom: 15px;
            margin-bottom: 15px;
        }
        
        .receipt-logo {
            font-weight: bold;
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .receipt-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .receipt-totals {
            border-top: 2px dashed #333;
            padding-top: 10px;
            margin-top: 10px;
        }
        
        /* Funny Order Messages */
        .funny-message {
            text-align: center;
            padding: 20px;
            color: #6c757d;
        }
        
        .funny-message i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--primary-light);
        }
        
        .funny-message h5 {
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .funny-message p {
            margin-bottom: 0;
            font-style: italic;
        }
        
        /* QR Code Styling */
        .qr-container {
            text-align: center;
            padding: 20px;
        }
        
        .qr-code {
            width: 200px;
            height: 200px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #6c757d;
        }
        
        .qr-total {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        /* Cash Payment Styling */
        .cash-payment-container {
            padding: 20px;
        }
        
        .cash-amount-display {
            font-size: 1.5rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .cash-change-display {
            font-size: 1.2rem;
            font-weight: 600;
            text-align: center;
            margin-top: 20px;
            padding: 10px;
            border-radius: 8px;
        }
        
        .change-positive {
            background: #d4edda;
            color: #155724;
        }
        
        .change-negative {
            background: #f8d7da;
            color: #721c24;
        }
        
        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .payment-section {
                grid-template-columns: 1fr;
            }
            
            .brand-logo {
                font-size: 1.5rem;
            }
            
            .category-nav {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 10px;
            }
            
            .category-btn {
                display: inline-block;
                width: auto;
            }
        }
        
        /* Animation for new orders */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .order-item {
            animation: slideIn 0.3s ease;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="brand-header">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="brand-logo">
                        <i class="fas fa-coffee"></i>
                        Engr's Brew POS
                    </div>
                </div>
                <div class="col-md-6 text-end">
                    <div class="d-flex justify-content-end align-items-center">
                        <div class="me-3">
                            <i class="fas fa-user-circle me-1"></i>
                            <span class="cashier-name" id="cashierName" data-bs-toggle="modal" data-bs-target="#cashierModal">Cashier: Jess</span>
                        </div>
                        <div class="badge bg-light text-dark">
                            <i class="fas fa-clock me-1"></i>
                            <span id="current-time">00:00:00</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container-fluid mt-4">
        <div class="row">
            <!-- Menu Section -->
            <div class="col-lg-8">
                <!-- Category Navigation -->
                <div class="category-nav">
                    <div class="d-flex flex-wrap justify-content-center">
                        <button class="category-btn active" data-category="all">
                            <i class="fas fa-th-large me-2"></i>All
                        </button>
                        <button class="category-btn" data-category="coffee">
                            <i class="fas fa-coffee me-2"></i>Coffee
                        </button>
                        <button class="category-btn" data-category="fruit-tea">
                            <i class="fas fa-glass-whiskey me-2"></i>Fruit Tea
                        </button>
                        <button class="category-btn" data-category="milk-based">
                            <i class="fas fa-wine-bottle me-2"></i>Milk-Based
                        </button>
                        <button class="category-btn" data-category="pastries">
                            <i class="fas fa-cookie-bite me-2"></i>Pastries
                        </button>
                    </div>
                </div>
                
                <!-- Menu Items -->
                <div class="menu-container">
                    <div class="row" id="menuItems">
                        <!-- Menu items will be dynamically loaded here -->
                    </div>
                </div>
            </div>
            
            <!-- Order Section -->
            <div class="col-lg-4">
                <div class="order-container">
                    <div class="order-header">
                        <h4 class="mb-0"><i class="fas fa-list-alt me-2"></i>Order List</h4>
                    </div>
                    
                    <div class="order-list" id="orderList">
                        <!-- Order items will be dynamically loaded here -->
                        <div class="funny-message" id="emptyOrder">
                            <i class="fas fa-shopping-cart"></i>
                            <h5>Walang order, beshie!</h5>
                            <p>Parang love life mo, empty. Charot! üòÇ</p>
                        </div>
                    </div>
                    
                    <div class="order-summary">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span>Subtotal:</span>
                            <span id="subtotal">‚Ç±0.00</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span>Service Tax (12%):</span>
                            <span id="tax">‚Ç±0.00</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <strong>Total:</strong>
                            <strong id="totalAmount">‚Ç±0.00</strong>
                        </div>
                        
                        <div class="payment-section">
                            <button class="payment-btn btn-card" id="cardBtn">
                                <i class="fas fa-credit-card"></i> Card
                            </button>
                            <button class="payment-btn btn-maya" id="mayaBtn">
                                <i class="fas fa-mobile-alt"></i> Maya
                            </button>
                            <button class="payment-btn btn-cash" id="cashBtn">
                                <i class="fas fa-money-bill-wave"></i> Cash
                            </button>
                            <button class="payment-btn btn-void" id="voidBtn">
                                <i class="fas fa-times-circle"></i> Void
                            </button>
                            <button class="payment-btn btn-print" id="printBtn">
                                <i class="fas fa-receipt"></i> Print
                            </button>
                            <button class="payment-btn btn-exit" id="exitBtn">
                                <i class="fas fa-sign-out-alt"></i> Exit
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Item Modal -->
    <div class="modal fade" id="itemModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalItemName">Item Name</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-4">
                        <h6 class="mb-3">Select Size:</h6>
                        <div class="row" id="sizeOptions">
                            <!-- Size options will be dynamically loaded here -->
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h6 class="mb-3">Quantity:</h6>
                        <div class="d-flex align-items-center justify-content-center">
                            <button class="quantity-btn" id="decreaseQty">
                                <i class="fas fa-minus"></i>
                            </button>
                            <span class="quantity-value mx-3" id="quantityValue">1</span>
                            <button class="quantity-btn" id="increaseQty">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div id="addOnsSection">
                        <!-- Add-ons will be dynamically loaded here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="doneBtn">Add to Order</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cashier Name Modal -->
    <div class="modal fade" id="cashierModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Change Cashier Name</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="newCashierName" class="form-label">Enter New Cashier Name:</label>
                        <input type="text" class="form-control" id="newCashierName" placeholder="Enter name">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveCashierName">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Card Payment Modal -->
    <div class="modal fade" id="cardModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Card Payment</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <div class="card-type mb-2">VISA</div>
                        <div class="card-number-display">CARCE 600</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="cardNumber" class="form-label">Card Number</label>
                        <input type="text" class="form-control" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
                        <div class="form-text">16-digit card number</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="cardName" class="form-label">Name on Card</label>
                        <input type="text" class="form-control" id="cardName" placeholder="Ex. John Website">
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="expiryDate" class="form-label">Expiry Date</label>
                            <input type="text" class="form-control" id="expiryDate" placeholder="01/19">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="securityCode" class="form-label">Security Code</label>
                            <input type="text" class="form-control" id="securityCode" placeholder="123" maxlength="3">
                            <div class="form-text">3-digit code</div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="cardNextBtn">Process Payment</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Maya Payment Modal -->
    <div class="modal fade" id="mayaModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Maya Payment</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="qr-container">
                        <div class="qr-total">Total: <span id="mayaTotalAmount">‚Ç±0.00</span></div>
                        <div class="qr-code">
                            <div class="text-center">
                               <img src ="mayaqr.png" alt="Maya Logo" class="img-fluid my-3" style="max-height: 400px;">
                                <div >Scan QR Code</div>
                            </div>
                        </div>
                        
                        <p class="text-muted">Scan this QR code using your Maya app to complete payment</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="mayaPayBtn">Payment Complete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cash Payment Modal -->
    <div class="modal fade" id="cashModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Cash Payment</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="cash-payment-container">
                        <div class="cash-amount-display">Total: <span id="cashTotalAmount">‚Ç±0.00</span></div>
                        
                        <div class="mb-3">
                            <label for="cashAmount" class="form-label">Amount Received:</label>
                            <input type="number" class="form-control" id="cashAmount" placeholder="0.00">
                        </div>
                        
                        <div class="cash-change-display" id="cashChangeDisplay">
                            Change: ‚Ç±0.00
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="cashConfirmBtn">Confirm Payment</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Receipt Modal -->
    <div class="modal fade" id="receiptModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Order Receipt</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="receipt">
                        <div class="receipt-header">
                            <div class="receipt-logo">ENGR'S BREW</div>
                            <div>INVOICE #00123</div>
                            <div id="receiptDateTime">October 3, 2025 02:14 PM</div>
                            <div>Arkong Bato 1444 Valenzuela, Philippines</div>
                            <div>Cashier: <span id="receiptCashier">Jess</span></div>
                        </div>
                        
                        <div class="receipt-items" id="receiptItems">
                            <!-- Receipt items will be dynamically loaded here -->
                        </div>
                        
                        <div class="receipt-totals">
                            <div class="receipt-item">
                                <div>Sub-total:</div>
                                <div id="receiptSubtotal">‚Ç±0.00</div>
                            </div>
                            <div class="receipt-item">
                                <div>Service Tax:</div>
                                <div id="receiptTax">‚Ç±0.00</div>
                            </div>
                            <div class="receipt-item">
                                <div><strong>Total:</strong></div>
                                <div><strong id="receiptTotal">‚Ç±0.00</strong></div>
                            </div>
                            <div class="receipt-item">
                                <div>Payment:</div>
                                <div id="receiptPayment">CASH</div>
                            </div>
                            <div class="receipt-item">
                                <div>Change:</div>
                                <div id="receiptChange">‚Ç±0.00</div>
                            </div>
                        </div>
                        
                        <div class="receipt-message text-center mt-3">
                            Brewed with love, and where coffee becomes an experience. ‚òï
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="actualPrintBtn">
                        <i class="fas fa-print me-2"></i>Print Receipt
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap & jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Menu data with different prices per category and item
        const menuData = {
            "coffee": {
                "Cafe Latte": { 
                    prices: { "grande": 59, "venti": 69 },
                    addOns: ["Syrup/Drizzle", "Milk", "Sweetener", "Extra Shot"],
                    image: "https://th.bing.com/th/id/R.c828d47fe30f0338f8fd968c8ab698bc?rik=AfNYktuWpOeEmQ&riu=http%3a%2f%2frecipesnobs.com%2fwp-content%2fuploads%2f2016%2f05%2fcoffee-latte.jpg&ehk=bonPS7DNc3Rii4dZNjWcTYdeWkXNaNwFFAYjVyy9NM8%3d&risl=&pid=ImgRaw&r=0"
                },
                "Matcha Latte": { 
                    prices: { "grande": 69, "venti": 89 },
                    addOns: ["Syrup/Drizzle", "Milk", "Sweetener", "Extra Shot"],
                    image: "https://erbology.co/_next/image/?url=https:%2F%2Ferbology.health%2Fstorage%2Fimages%2Frecipes%2FJul2023%2FEJEHowrDNH.jpg&w=1080&q=75"
                },
                "Biscoff Latte": { 
                    prices: { "grande": 79, "venti": 99 },
                    addOns: ["Syrup/Drizzle", "Milk", "Sweetener", "Extra Shot"],
                    image: "https://mymorningmocha.com/wp-content/uploads/2023/09/biscoff-latte-recipe-1024x683.jpg"
                },
                "Americano": { 
                    prices: { "grande": 59, "venti": 69 },
                    addOns: ["Syrup/Drizzle", "Milk", "Sweetener", "Extra Shot"],
                    image: "https://flavourscafe.com/wp-content/uploads/2023/10/Iced_Americano_Flavours-Cafe_11zon.jpg"
                }
            },
            "fruit-tea": {
                "Iced Tea": { 
                    prices: { "grande": 39, "venti": 59 },
                    addOns: ["Popping Boba", "Coffee Jelly", "Boba"],
                    image: "https://images.unsplash.com/photo-1556679343-c7306c1976bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
                },
                "Lemon Tea": { 
                    prices: { "grande": 39, "venti": 59 },
                    addOns: ["Popping Boba", "Coffee Jelly", "Boba"],
                    image: "https://images.unsplash.com/photo-1621506289937-a8e4df240d0b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
                },
                "Mango Tea": { 
                    prices: { "grande": 39, "venti": 59 },
                    addOns: ["Popping Boba", "Coffee Jelly", "Boba"],
                    image: "https://masalaandchai.com/wp-content/uploads/2021/06/Homemade-Mango-Iced-Tea.jpg"
                }
            },
            "milk-based": {
                "Dark Choco": { 
                    prices: { "grande": 59, "venti": 69 },
                    addOns: [],
                    image: "https://www.putrafarmayogyakarta.co.id/wp-content/uploads/2023/09/dark-chocolate-drink.jpg"
                },
                "Strawberry Milk": { 
                    prices: { "grande": 39, "venti": 59 },
                    addOns: [],
                    image: "https://tse1.explicit.bing.net/th/id/OIP.MxAe61lgTTNZufcrdfQmvwHaLH?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3"
                }
            },
            "pastries": {
                "Croissant": { 
                    prices: { "standard": 80 },
                    addOns: [],
                    image: "https://images.unsplash.com/photo-1509440159596-0249088772ff?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
                },
                "Cheesecake": { 
                    prices: { "standard": 120 },
                    addOns: [],
                    image: "https://images.unsplash.com/photo-1524351199678-941a58a3df50?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
                },
                "Cookie": { 
                    prices: { "standard": 50 },
                    addOns: [],
                    image: "https://images.unsplash.com/photo-1499636136210-6f4ee915583e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
                }
            }
        };

        // Funny messages for empty order list
        const funnyMessages = [
            {
                icon: "fas fa-shopping-cart",
                title: "Walang order, beshie!",
                message: "Parang love life mo, empty. Charot! üòÇ"
            },
            {
                icon: "fas fa-coffee",
                title: "Uy, wala pang order!",
                message: "Kape muna tayo habang naghihintay? ‚òï"
            },
            {
                icon: "fas fa-utensils",
                title: "Order ka naman dyan!",
                message: "Gutom na kami dito sa kusina! üçΩÔ∏è"
            },
            {
                icon: "fas fa-wind",
                title: "Ang lamig dito!",
                message: "Wala kasing mainit na order! ‚ùÑÔ∏è"
            },
            {
                icon: "fas fa-money-bill-wave",
                title: "Business is slow today",
                message: "Sana all may pambili ng kape! üí∏"
            }
        ];

        // Global variables
        let currentItem = null;
        let currentCategory = null;
        let currentSize = 'grande';
        let currentPrice = 0;
        let currentQuantity = 1;
        let selectedAddOns = [];
        let orders = [];
        let paymentMethod = 'CASH';
        let cashChange = 0;
        let cashierName = "Jess";
        const ADDON_PRICE = 15; // ‚Ç±15 for all add-ons

        // Initialize the POS system
        $(document).ready(function() {
            // Load menu items
            loadMenuItems('all');
            
            // Update current time
            updateTime();
            setInterval(updateTime, 1000);
            
            // Set cashier name
            $('#cashierName').text(`Cashier: ${cashierName}`);
            $('#receiptCashier').text(cashierName);
            
            // Event listeners for category buttons
            $('.category-btn').on('click', function() {
                $('.category-btn').removeClass('active');
                $(this).addClass('active');
                const category = $(this).data('category');
                loadMenuItems(category);
            });
            
            // Event listeners for payment buttons
            $('#cardBtn').on('click', function() {
                if (orders.length === 0) {
                    alert('No orders to process!');
                    return;
                }
                $('#cardModal').modal('show');
            });
            
            $('#mayaBtn').on('click', function() {
                if (orders.length === 0) {
                    alert('No orders to process!');
                    return;
                }
                const total = calculateTotal();
                $('#mayaTotalAmount').text(`‚Ç±${total.toFixed(2)}`);
                $('#mayaModal').modal('show');
            });
            
            $('#cashBtn').on('click', function() {
                if (orders.length === 0) {
                    alert('No orders to process!');
                    return;
                }
                const total = calculateTotal();
                $('#cashTotalAmount').text(`‚Ç±${total.toFixed(2)}`);
                $('#cashAmount').val('');
                $('#cashChangeDisplay').text('Change: ‚Ç±0.00').removeClass('change-positive change-negative');
                $('#cashModal').modal('show');
            });
            
            $('#voidBtn').on('click', function() {
                if (confirm('Are you sure you want to void the entire order?')) {
                    orders = [];
                    updateOrderList();
                }
            });
            
            $('#printBtn').on('click', function() {
                if (orders.length === 0) {
                    alert('No orders to print!');
                    return;
                }
                openReceiptModal();
            });
            
            $('#exitBtn').on('click', function() {
                if (confirm('Are you sure you want to exit?')) {
                    // In a real application, this would close the application
                    // For this demo, we'll just refresh the page
                    location.reload();
                }
            });
            
            // Card payment processing
            $('#cardNextBtn').on('click', function() {
                // Validate form
                const cardNumber = $('#cardNumber').val().replace(/\s/g, '');
                const cardName = $('#cardName').val();
                const expiryDate = $('#expiryDate').val();
                const securityCode = $('#securityCode').val();
                
                if (!cardNumber || cardNumber.length !== 16) {
                    alert('Please enter a valid 16-digit card number');
                    return;
                }
                
                if (!cardName) {
                    alert('Please enter the name on card');
                    return;
                }
                
                if (!expiryDate || !/^\d{2}\/\d{2}$/.test(expiryDate)) {
                    alert('Please enter a valid expiry date (MM/YY)');
                    return;
                }
                
                if (!securityCode || securityCode.length !== 3) {
                    alert('Please enter a valid 3-digit security code');
                    return;
                }
                
                // Process payment
                paymentMethod = 'CARD';
                $('#cardModal').modal('hide');
                openReceiptModal();
            });
            
            // Maya payment processing
            $('#mayaPayBtn').on('click', function() {
                paymentMethod = 'MAYA';
                $('#mayaModal').modal('hide');
                openReceiptModal();
            });
            
            // Cash payment processing
            $('#cashConfirmBtn').on('click', function() {
                const total = calculateTotal();
                const cashReceived = parseFloat($('#cashAmount').val()) || 0;
                
                if (cashReceived < total) {
                    alert('Insufficient cash received!');
                    return;
                }
                
                cashChange = cashReceived - total;
                paymentMethod = 'CASH';
                $('#cashModal').modal('hide');
                openReceiptModal();
            });
            
            // Cash amount change calculation
            $('#cashAmount').on('input', function() {
                const total = calculateTotal();
                const cashReceived = parseFloat($(this).val()) || 0;
                cashChange = cashReceived - total;
                
                const changeDisplay = $('#cashChangeDisplay');
                changeDisplay.text(`Change: ‚Ç±${cashChange.toFixed(2)}`);
                
                if (cashChange >= 0) {
                    changeDisplay.removeClass('change-negative').addClass('change-positive');
                } else {
                    changeDisplay.removeClass('change-positive').addClass('change-negative');
                }
            });
            
            // Print receipt
            $('#actualPrintBtn').on('click', function() {
                // In a real application, this would connect to a printer
                alert('Receipt sent to printer!');
                $('#receiptModal').modal('hide');
                
                // Clear the order after printing
                orders = [];
                updateOrderList();
            });
            
            // Change cashier name
            $('#saveCashierName').on('click', function() {
                const newName = $('#newCashierName').val().trim();
                if (newName) {
                    cashierName = newName;
                    $('#cashierName').text(`Cashier: ${cashierName}`);
                    $('#receiptCashier').text(cashierName);
                    $('#cashierModal').modal('hide');
                    $('#newCashierName').val('');
                } else {
                    alert('Please enter a valid name');
                }
            });
            
            // Format card number input
            $('#cardNumber').on('input', function(e) {
                let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
                if (value.length > 16) {
                    value = value.substring(0, 16);
                }
                
                let formattedValue = '';
                for (let i = 0; i < value.length; i++) {
                    if (i > 0 && i % 4 === 0) {
                        formattedValue += ' ';
                    }
                    formattedValue += value[i];
                }
                
                e.target.value = formattedValue;
            });
            
            // Format expiry date input
            $('#expiryDate').on('input', function(e) {
                let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
                
                if (value.length >= 2) {
                    value = value.substring(0, 2) + '/' + value.substring(2, 4);
                }
                
                e.target.value = value.substring(0, 5);
            });
            
            // Limit security code to 3 digits
            $('#securityCode').on('input', function(e) {
                let value = e.target.value.replace(/[^0-9]/gi, '');
                if (value.length > 3) {
                    value = value.substring(0, 3);
                }
                e.target.value = value;
            });
        });

        // Load menu items based on category
        function loadMenuItems(category) {
            const menuItemsContainer = $('#menuItems');
            menuItemsContainer.empty();
            
            for (const cat in menuData) {
                if (category !== 'all' && category !== cat) continue;
                
                for (const itemName in menuData[cat]) {
                    const item = menuData[cat][itemName];
                    const minPrice = Math.min(...Object.values(item.prices));
                    
                    const menuItemHTML = `
                        <div class="col-md-6 col-lg-4 mb-4">
                            <div class="menu-item h-100" data-category="${cat}" data-item="${itemName}">
                                <div class="item-image-container">
                                    <img src="${item.image}" class="item-image" alt="${itemName}">
                                    <div class="item-overlay">
                                        <h6 class="item-name">${itemName}</h6>
                                        <div class="item-price">From ‚Ç±${minPrice}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    menuItemsContainer.append(menuItemHTML);
                }
            }
            
            // Add click event to menu items
            $('.menu-item').on('click', function() {
                const category = $(this).data('category');
                const itemName = $(this).data('item');
                openItemModal(itemName, category);
            });
        }

        // Open item modal
        function openItemModal(itemName, category) {
            currentItem = itemName;
            currentCategory = category;
            currentQuantity = 1;
            selectedAddOns = [];
            
            // Get item data
            const itemData = menuData[category][itemName];
            
            // Set modal title
            $('#modalItemName').text(itemName);
            
            // Clear previous options
            $('#sizeOptions').empty();
            $('#addOnsSection').empty();
            
            // Add size options based on category
            if (category === 'pastries') {
                // Pastries don't have size options
                $('#sizeOptions').parent().hide();
                currentSize = 'standard';
                currentPrice = itemData.prices.standard;
            } else {
                $('#sizeOptions').parent().show();
                for (const [size, price] of Object.entries(itemData.prices)) {
                    const isSelected = size === 'grande';
                    if (isSelected) {
                        currentSize = 'grande';
                        currentPrice = price;
                    }
                    
                    const sizeOptionHTML = `
                        <div class="col-6">
                            <div class="size-option ${isSelected ? 'selected' : ''}" data-size="${size}" data-price="${price}">
                                <div class="fw-bold">${size.toUpperCase()}</div>
                                <div>‚Ç±${price}</div>
                            </div>
                        </div>
                    `;
                    
                    $('#sizeOptions').append(sizeOptionHTML);
                }
                
                // Add click event to size options
                $('.size-option').on('click', function() {
                    $('.size-option').removeClass('selected');
                    $(this).addClass('selected');
                    currentSize = $(this).data('size');
                    currentPrice = $(this).data('price');
                });
            }
            
            // Set quantity
            $('#quantityValue').text(currentQuantity);
            
            // Add quantity controls
            $('#decreaseQty').off('click').on('click', function() {
                if (currentQuantity > 1) {
                    currentQuantity--;
                    $('#quantityValue').text(currentQuantity);
                }
            });
            
            $('#increaseQty').off('click').on('click', function() {
                currentQuantity++;
                $('#quantityValue').text(currentQuantity);
            });
            
            // Add add-ons based on category
            if (itemData.addOns.length > 0 && category !== 'milk-based') {
                $('#addOnsSection').show();
                $('#addOnsSection').html(`
                    <h6 class="mb-3">Add-ons (+‚Ç±${ADDON_PRICE} each):</h6>
                    <div class="row" id="addOnsList"></div>
                `);
                
                itemData.addOns.forEach(addOn => {
                    const addOnHTML = `
                        <div class="col-6 mb-2">
                            <div class="add-on-item" data-addon="${addOn}">
                                <div class="fw-bold">${addOn}</div>
                                <div class="add-on-price">+‚Ç±${ADDON_PRICE}</div>
                            </div>
                        </div>
                    `;
                    
                    $('#addOnsList').append(addOnHTML);
                });
                
                // Add click event to add-on items
                $('.add-on-item').on('click', function() {
                    $(this).toggleClass('selected');
                    
                    const addon = $(this).data('addon');
                    if ($(this).hasClass('selected')) {
                        selectedAddOns.push(addon);
                    } else {
                        selectedAddOns = selectedAddOns.filter(a => a !== addon);
                    }
                });
            } else {
                $('#addOnsSection').hide();
            }
            
            // Set done button
            $('#doneBtn').off('click').on('click', function() {
                addToOrder();
                $('#itemModal').modal('hide');
            });
            
            // Show modal
            $('#itemModal').modal('show');
        }

        // Add item to order
        function addToOrder() {
            const order = {
                name: currentItem,
                category: currentCategory,
                size: currentSize,
                price: currentPrice,
                quantity: currentQuantity,
                addOns: [...selectedAddOns],
                addOnsPrice: selectedAddOns.length * ADDON_PRICE
            };
            
            orders.push(order);
            updateOrderList();
        }

        // Update order list
        function updateOrderList() {
            const orderList = $('#orderList');
            const emptyOrder = $('#emptyOrder');
            
            if (orders.length === 0) {
                // Show random funny message
                const randomMessage = funnyMessages[Math.floor(Math.random() * funnyMessages.length)];
                emptyOrder.html(`
                    <i class="${randomMessage.icon}"></i>
                    <h5>${randomMessage.title}</h5>
                    <p>${randomMessage.message}</p>
                `);
                orderList.html(emptyOrder);
                updateOrderSummary();
                return;
            }
            
            emptyOrder.hide();
            
            let orderHTML = '';
            let total = 0;
            
            orders.forEach((order, index) => {
                const itemTotal = (order.price * order.quantity) + order.addOnsPrice;
                total += itemTotal;
                
                let sizeDisplay = '';
                if (order.category !== 'pastries') {
                    sizeDisplay = ` (${order.size.toUpperCase()})`;
                }
                
                orderHTML += `
                    <div class="order-item">
                        <div class="order-item-details">
                            <div class="order-item-name">${order.name}${sizeDisplay}</div>
                            ${order.addOns.length > 0 ? 
                                `<div class="order-item-extras">Add-ons: ${order.addOns.join(', ')}</div>` : 
                                ''
                            }
                        </div>
                        <div class="order-item-controls">
                            <button class="quantity-btn" onclick="decreaseOrderQuantity(${index})">
                                <i class="fas fa-minus"></i>
                            </button>
                            <span class="quantity-value">${order.quantity}</span>
                            <button class="quantity-btn" onclick="increaseOrderQuantity(${index})">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="order-item-price">‚Ç±${itemTotal.toFixed(2)}</div>
                    </div>
                `;
            });
            
            orderList.html(orderHTML);
            updateOrderSummary();
        }

        // Update order summary
        function updateOrderSummary() {
            const subtotal = calculateSubtotal();
            const tax = subtotal * 0.12;
            const total = subtotal + tax;
            
            $('#subtotal').text(`‚Ç±${subtotal.toFixed(2)}`);
            $('#tax').text(`‚Ç±${tax.toFixed(2)}`);
            $('#totalAmount').text(`‚Ç±${total.toFixed(2)}`);
        }

        // Calculate subtotal
        function calculateSubtotal() {
            let subtotal = 0;
            orders.forEach(order => {
                subtotal += (order.price * order.quantity) + order.addOnsPrice;
            });
            return subtotal;
        }

        // Calculate total
        function calculateTotal() {
            const subtotal = calculateSubtotal();
            const tax = subtotal * 0.12;
            return subtotal + tax;
        }

        // Decrease order quantity
        function decreaseOrderQuantity(index) {
            if (orders[index].quantity > 1) {
                orders[index].quantity--;
            } else {
                orders.splice(index, 1);
            }
            updateOrderList();
        }

        // Increase order quantity
        function increaseOrderQuantity(index) {
            orders[index].quantity++;
            updateOrderList();
        }

        // Open receipt modal
        function openReceiptModal() {
            // Update receipt date and time
            const now = new Date();
            $('#receiptDateTime').text(now.toLocaleString());
            
            // Update receipt cashier name
            $('#receiptCashier').text(cashierName);
            
            // Update receipt items
            const receiptItems = $('#receiptItems');
            receiptItems.empty();
            
            let subtotal = 0;
            
            orders.forEach(order => {
                const itemTotal = (order.price * order.quantity) + order.addOnsPrice;
                subtotal += itemTotal;
                
                let sizeDisplay = '';
                if (order.category !== 'pastries') {
                    sizeDisplay = ` (${order.size.toUpperCase()})`;
                }
                
                receiptItems.append(`
                    <div class="receipt-item">
                        <div>${order.quantity}x ${order.name}${sizeDisplay}</div>
                        <div>‚Ç±${itemTotal.toFixed(2)}</div>
                    </div>
                `);
                
                // Add add-ons if any
                if (order.addOns.length > 0) {
                    order.addOns.forEach(addon => {
                        receiptItems.append(`
                            <div class="receipt-item">
                                <div>&nbsp;&nbsp;+ ${addon}</div>
                                <div>‚Ç±${ADDON_PRICE}.00</div>
                            </div>
                        `);
                    });
                }
            });
            
            // Calculate totals
            const tax = subtotal * 0.12;
            const total = subtotal + tax;
            
            $('#receiptSubtotal').text(`‚Ç±${subtotal.toFixed(2)}`);
            $('#receiptTax').text(`‚Ç±${tax.toFixed(2)}`);
            $('#receiptTotal').text(`‚Ç±${total.toFixed(2)}`);
            $('#receiptPayment').text(paymentMethod);
            
            if (paymentMethod === 'CASH') {
                $('#receiptChange').text(`‚Ç±${cashChange.toFixed(2)}`);
            } else {
                $('#receiptChange').text(`‚Ç±0.00`);
            }
            
            $('#receiptModal').modal('show');
        }

        // Update current time
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            $('#current-time').text(timeString);
        }
    </script>
</body>
</html>